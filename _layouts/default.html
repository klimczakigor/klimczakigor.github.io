<!DOCTYPE html>
<html lang="en" id="top">
  {% include head.html %}
  <body>
    {% include header.html %}
    <main class="page-content">
      <div class="wrap">
        {{ content }}
      </div>
    </main>
    {% include footer.html %}
    <a class="to-top" href="#top" aria-label="Back to top">â–²</a>
    <script>
      (function () {
        var root = document.documentElement;
        var stored = localStorage.getItem("theme");
        var media = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)");
        function applyTheme(value) {
          if (value) {
            root.setAttribute("data-theme", value);
          } else {
            root.removeAttribute("data-theme");
          }
        }
        if (stored) {
          applyTheme(stored);
        } else {
          applyTheme(null);
        }
        if (media) {
          media.addEventListener("change", function (event) {
            if (!localStorage.getItem("theme")) {
              applyTheme(null);
            }
          });
        }
        var toggle = document.querySelector("[data-theme-toggle]");
        if (toggle) {
          toggle.addEventListener("click", function () {
            var current = root.getAttribute("data-theme");
            var systemDark = media && media.matches;
            var effective = current || (systemDark ? "dark" : "light");
            var next = effective === "light" ? "dark" : "light";
            applyTheme(next);
            localStorage.setItem("theme", next);
          });
        }
      })();
    </script>
  </body>
</html>
